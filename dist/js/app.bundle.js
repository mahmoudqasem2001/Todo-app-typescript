(()=>{"use strict";var t={812:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getDataFromLocalStorage=e.saveDataToLocalStorage=void 0,e.saveDataToLocalStorage=function(t,e){localStorage.setItem(t,JSON.stringify(e))},e.getDataFromLocalStorage=function(t){var e=localStorage.getItem(t);return e?JSON.parse(e):null}},702:function(t,e,a){var s=this&&this.__assign||function(){return s=Object.assign||function(t){for(var e,a=1,s=arguments.length;a<s;a++)for(var n in e=arguments[a])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},s.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.ToDoListImpl=void 0;var n=a(812),i=function(){function t(){this.tasks=[]}return t.prototype.addTask=function(t){this.tasks.unshift(t),(0,n.saveDataToLocalStorage)("tasks",this.tasks)},t.prototype.deleteTask=function(t){this.tasks=this.tasks.filter((function(e){return e.id!==t})),(0,n.saveDataToLocalStorage)("tasks",this.tasks)},t.prototype.editTask=function(t){var e=t.id,a=t.newName;this.tasks=this.tasks.map((function(t){return t.id===e?s(s({},t),{name:a}):t})),(0,n.saveDataToLocalStorage)("tasks",this.tasks)},t.prototype.toggleTaskCompletion=function(t){this.tasks=this.tasks.map((function(e){return e.id===t&&(e.completed=!e.completed),e}))},t.prototype.filterTasks=function(t){switch(t){case"active":return this.tasks.filter((function(t){return!t.completed}));case"completed":return this.tasks.filter((function(t){return t.completed}));default:return this.tasks}},t.prototype.clearCompletedTasks=function(){this.tasks=this.tasks.filter((function(t){return!t.completed})),(0,n.saveDataToLocalStorage)("tasks",this.tasks)},t}();e.ToDoListImpl=i}},e={};function a(s){var n=e[s];if(void 0!==n)return n.exports;var i=e[s]={exports:{}};return t[s].call(i.exports,i,i.exports,a),i.exports}(()=>{var t=a(702),e=a(812),s=a(812),n=new t.ToDoListImpl,i=document.getElementById("allButton"),o=document.getElementById("activeButton"),d=document.getElementById("completedButton"),r=document.getElementById("clearCompletedButton"),l=document.getElementById("addTaskModal"),c=document.getElementById("addTaskButton"),u=document.getElementById("closeAddTaskModal"),m=document.getElementById("addNewTask");function v(){l.classList.add("hidden")}function k(t){!function(t){document.querySelectorAll("button[data-filter]").forEach((function(t){return t.classList.remove("bg-blue-500","text-white")})),t.classList.add("bg-blue-500","rounded-md","text-white");var e=t.dataset.filter||"all";n.filterTasks(e),f(n.filterTasks(e))}(t.target)}function f(t){var a=document.getElementById("taskList");a&&(a.innerHTML="",t.forEach((function(t){var s=document.createElement("li");s.draggable=!0,s.dataset.taskId=t.id.toString(),s.classList.add("flex","justify-between","border","p-2","mb-4");var i=document.createElement("input");i.type="checkbox",i.checked=t.completed,i.addEventListener("change",(function(){n.toggleTaskCompletion(t.id),(0,e.saveDataToLocalStorage)("tasks",n.tasks),f(n.filterTasks("all"))}));var o=document.createElement("span");o.textContent=t.name,o.classList.add("ml-4","basis-3/4");var d=document.createElement("button");d.innerHTML='<i class="fas fa-edit"></i>',d.classList.add("ml-2","p-2","text-blue-500"),d.addEventListener("click",(function(){var a=document.getElementById("modal");a.classList.remove("hidden");var s=document.getElementById("newTaskName");s.value=t.name,document.getElementById("closeModal").addEventListener("click",(function(){a.classList.add("hidden")}));var i=document.getElementById("updateTaskName");i.addEventListener("click",(function o(){var d=s.value;d&&(n.editTask({id:t.id,newName:d}),(0,e.saveDataToLocalStorage)("tasks",n.tasks),f(n.filterTasks("all")),s.value="",a.classList.add("hidden"),i.removeEventListener("click",o))}))}));var r=document.createElement("button");r.innerHTML='<i class="fa-solid fa-trash-can text-red-600"></i>',r.classList.add("ml-2","p-2"),r.addEventListener("click",(function(){var a=document.getElementById("deleteConfirmationModal");a.classList.remove("hidden");var s=document.getElementById("confirmDelete"),i=document.getElementById("cancelDelete"),o=function(){n.deleteTask(t.id),(0,e.saveDataToLocalStorage)("tasks",n.tasks),f(n.filterTasks("all")),a.classList.add("hidden"),s.removeEventListener("click",o),i.removeEventListener("click",d)},d=function(){a.classList.add("hidden"),s.removeEventListener("click",o),i.removeEventListener("click",d)};s.addEventListener("click",o),i.addEventListener("click",d)})),s.addEventListener("dragstart",(function(e){var a;null===(a=e.dataTransfer)||void 0===a||a.setData("text/plain",t.id.toString())})),s.addEventListener("dragover",(function(t){t.preventDefault()})),s.addEventListener("drop",(function(t){var a;t.preventDefault();var i=parseInt((null===(a=t.dataTransfer)||void 0===a?void 0:a.getData("text/plain"))||"");if(!isNaN(i)){var o=parseInt(s.dataset.taskId||""),d=n.tasks.find((function(t){return t.id===i})),r=n.tasks.find((function(t){return t.id===o}));if(d&&r){var l=n.tasks.indexOf(d),c=n.tasks.indexOf(r);n.tasks.splice(l,1),n.tasks.splice(c,0,d),(0,e.saveDataToLocalStorage)("tasks",n.tasks),f(n.filterTasks("all"))}}})),s.appendChild(i),s.appendChild(o),s.appendChild(d),s.appendChild(r),a.appendChild(s)})))}c.addEventListener("click",(function(){l.classList.remove("hidden")})),u.addEventListener("click",v),m.addEventListener("click",(function(){var t=document.getElementById("newTask"),a=t.value;if(""!==a.trim()){var s={id:n.tasks.length+1,name:a,completed:!1};n.addTask(s),f(n.filterTasks("all")),t.value="",v(),(0,e.saveDataToLocalStorage)("tasks",n.tasks)}})),i.addEventListener("click",k),o.addEventListener("click",k),d.addEventListener("click",k),r.addEventListener("click",(function(){n.clearCompletedTasks(),(0,e.saveDataToLocalStorage)("tasks",n.tasks),f(n.filterTasks("all")),document.querySelectorAll("button[data-filter]").forEach((function(t){return t.classList.remove("bg-blue-500","text-white")}))}));var p=(0,s.getDataFromLocalStorage)("tasks");p&&(n.tasks=p),f(n.filterTasks("all"))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianMvYXBwLmJ1bmRsZS5qcyIsIm1hcHBpbmdzIjoic0NBQ0FBLE9BQU9DLGVBQWVDLEVBQVMsYUFBYyxDQUFFQyxPQUFPLElBQ3RERCxFQUFRRSx3QkFBMEJGLEVBQVFHLDRCQUF5QixFQVduRUgsRUFBUUcsdUJBSFIsU0FBZ0NDLEVBQUtDLEdBQ2pDQyxhQUFhQyxRQUFRSCxFQUFLSSxLQUFLQyxVQUFVSixHQUM3QyxFQVlBTCxFQUFRRSx3QkFKUixTQUFpQ0UsR0FDN0IsSUFBSUMsRUFBT0MsYUFBYUksUUFBUU4sR0FDaEMsT0FBT0MsRUFBT0csS0FBS0csTUFBTU4sR0FBUSxJQUNyQyxDLHNCQ3RCQSxJQUFJTyxFQUFZQyxNQUFRQSxLQUFLRCxVQUFhLFdBU3RDLE9BUkFBLEVBQVdkLE9BQU9nQixRQUFVLFNBQVNDLEdBQ2pDLElBQUssSUFBSUMsRUFBR0MsRUFBSSxFQUFHQyxFQUFJQyxVQUFVQyxPQUFRSCxFQUFJQyxFQUFHRCxJQUU1QyxJQUFLLElBQUlJLEtBRFRMLEVBQUlHLFVBQVVGLEdBQ09uQixPQUFPd0IsVUFBVUMsZUFBZUMsS0FBS1IsRUFBR0ssS0FDekROLEVBQUVNLEdBQUtMLEVBQUVLLElBRWpCLE9BQU9OLENBQ1gsRUFDT0gsRUFBU2EsTUFBTVosS0FBTU0sVUFDaEMsRUFDQXJCLE9BQU9DLGVBQWVDLEVBQVMsYUFBYyxDQUFFQyxPQUFPLElBQ3RERCxFQUFRMEIsa0JBQWUsRUFDdkIsSUFBSUMsRUFBd0IsRUFBUSxLQU1oQ0QsRUFBOEIsV0FDOUIsU0FBU0EsSUFJTGIsS0FBS2UsTUFBUSxFQUNqQixDQXFHQSxPQWhHQUYsRUFBYUosVUFBVU8sUUFBVSxTQUFVQyxHQUl2Q2pCLEtBQUtlLE1BQU1HLFFBQVFELElBSW5CLEVBQUlILEVBQXNCeEIsd0JBQXdCLFFBQVNVLEtBQUtlLE1BQ3BFLEVBS0FGLEVBQWFKLFVBQVVVLFdBQWEsU0FBVUMsR0FJMUNwQixLQUFLZSxNQUFRZixLQUFLZSxNQUFNTSxRQUFPLFNBQVVKLEdBQVEsT0FBT0EsRUFBS0csS0FBT0EsQ0FBSSxLQUl4RSxFQUFJTixFQUFzQnhCLHdCQUF3QixRQUFTVSxLQUFLZSxNQUNwRSxFQUtBRixFQUFhSixVQUFVYSxTQUFXLFNBQVVDLEdBQ3hDLElBQUlILEVBQUtHLEVBQUdILEdBQUlJLEVBQVVELEVBQUdDLFFBQzdCeEIsS0FBS2UsTUFBUWYsS0FBS2UsTUFBTVUsS0FBSSxTQUFVUixHQUNsQyxPQUFJQSxFQUFLRyxLQUFPQSxFQUlMckIsRUFBU0EsRUFBUyxDQUFDLEVBQUdrQixHQUFPLENBQUVTLEtBQU1GLElBRXpDUCxDQUNYLEtBSUEsRUFBSUgsRUFBc0J4Qix3QkFBd0IsUUFBU1UsS0FBS2UsTUFDcEUsRUFLQUYsRUFBYUosVUFBVWtCLHFCQUF1QixTQUFVUCxHQUNwRHBCLEtBQUtlLE1BQVFmLEtBQUtlLE1BQU1VLEtBQUksU0FBVVIsR0FPbEMsT0FOSUEsRUFBS0csS0FBT0EsSUFJWkgsRUFBS1csV0FBYVgsRUFBS1csV0FFcEJYLENBQ1gsR0FDSixFQU1BSixFQUFhSixVQUFVb0IsWUFBYyxTQUFVUixHQUMzQyxPQUFRQSxHQUNKLElBQUssU0FJRCxPQUFPckIsS0FBS2UsTUFBTU0sUUFBTyxTQUFVSixHQUFRLE9BQVFBLEVBQUtXLFNBQVcsSUFDdkUsSUFBSyxZQUlELE9BQU81QixLQUFLZSxNQUFNTSxRQUFPLFNBQVVKLEdBQVEsT0FBT0EsRUFBS1csU0FBVyxJQUN0RSxRQUlJLE9BQU81QixLQUFLZSxNQUV4QixFQUlBRixFQUFhSixVQUFVcUIsb0JBQXNCLFdBSXpDOUIsS0FBS2UsTUFBUWYsS0FBS2UsTUFBTU0sUUFBTyxTQUFVSixHQUFRLE9BQVFBLEVBQUtXLFNBQVcsS0FJekUsRUFBSWQsRUFBc0J4Qix3QkFBd0IsUUFBU1UsS0FBS2UsTUFDcEUsRUFDT0YsQ0FDWCxDQTVHaUMsR0E2R2pDMUIsRUFBUTBCLGFBQWVBLEMsR0NoSW5Ca0IsRUFBMkIsQ0FBQyxFQUdoQyxTQUFTQyxFQUFvQkMsR0FFNUIsSUFBSUMsRUFBZUgsRUFBeUJFLEdBQzVDLFFBQXFCRSxJQUFqQkQsRUFDSCxPQUFPQSxFQUFhL0MsUUFHckIsSUFBSWlELEVBQVNMLEVBQXlCRSxHQUFZLENBR2pEOUMsUUFBUyxDQUFDLEdBT1gsT0FIQWtELEVBQW9CSixHQUFVdEIsS0FBS3lCLEVBQU9qRCxRQUFTaUQsRUFBUUEsRUFBT2pELFFBQVM2QyxHQUdwRUksRUFBT2pELE9BQ2YsQyxNQ3BCQSxJQUFJbUQsRUFBZSxFQUFRLEtBQ3ZCeEIsRUFBd0IsRUFBUSxLQUNoQ3lCLEVBQXdCLEVBQVEsS0FLaENDLEVBQVcsSUFBSUYsRUFBYXpCLGFBSzVCNEIsRUFBWUMsU0FBU0MsZUFBZSxhQUtwQ0MsRUFBZUYsU0FBU0MsZUFBZSxnQkFLdkNFLEVBQWtCSCxTQUFTQyxlQUFlLG1CQUsxQ0csRUFBdUJKLFNBQVNDLGVBQWUsd0JBSy9DSSxFQUFlTCxTQUFTQyxlQUFlLGdCQUt2Q0ssRUFBZ0JOLFNBQVNDLGVBQWUsaUJBS3hDTSxFQUEwQlAsU0FBU0MsZUFBZSxxQkFLbERPLEVBQW1CUixTQUFTQyxlQUFlLGNBWS9DLFNBQVNRLElBQ0xKLEVBQWFLLFVBQVVDLElBQUksU0FDL0IsQ0FrREEsU0FBU0MsRUFBdUJDLElBYmhDLFNBQXNCQyxHQUNKZCxTQUFTZSxpQkFBaUIsdUJBQ2hDQyxTQUFRLFNBQVVDLEdBQU8sT0FBT0EsRUFBSVAsVUFBVVEsT0FBTyxjQUFlLGFBQWUsSUFDM0ZKLEVBQWNKLFVBQVVDLElBQUksY0FBZSxhQUFjLGNBQ3pELElBQUloQyxFQUFTbUMsRUFBY0ssUUFBUXhDLFFBQVUsTUFDN0NtQixFQUFTWCxZQUFZUixHQUNyQnlDLEVBQVl0QixFQUFTWCxZQUFZUixHQUNyQyxDQVFJMEMsQ0FEYVIsRUFBTVMsT0FFdkIsQ0E0QkEsU0FBU0YsRUFBWS9DLEdBS2pCLElBQUlrRCxFQUFXdkIsU0FBU0MsZUFBZSxZQUVuQ3NCLElBRUFBLEVBQVNDLFVBQVksR0FFckJuRCxFQUFNMkMsU0FBUSxTQUFVekMsR0FLcEIsSUFBSWtELEVBQVd6QixTQUFTMEIsY0FBYyxNQUN0Q0QsRUFBU0UsV0FBWSxFQUNyQkYsRUFBU04sUUFBUVMsT0FBU3JELEVBQUtHLEdBQUdtRCxXQUNsQ0osRUFBU2YsVUFBVUMsSUFBSSxPQUFRLGtCQUFtQixTQUFVLE1BQU8sUUFLbkUsSUFBSW1CLEVBQVc5QixTQUFTMEIsY0FBYyxTQUN0Q0ksRUFBU0MsS0FBTyxXQUNoQkQsRUFBU0UsUUFBVXpELEVBQUtXLFVBRXhCNEMsRUFBU0csaUJBQWlCLFVBQVUsV0FDaENuQyxFQUFTYixxQkFBcUJWLEVBQUtHLEtBQ25DLEVBQUlOLEVBQXNCeEIsd0JBQXdCLFFBQVNrRCxFQUFTekIsT0FDcEUrQyxFQUFZdEIsRUFBU1gsWUFBWSxPQUNyQyxJQUtBLElBQUkrQyxFQUFXbEMsU0FBUzBCLGNBQWMsUUFDdENRLEVBQVNDLFlBQWM1RCxFQUFLUyxLQUM1QmtELEVBQVN4QixVQUFVQyxJQUFJLE9BQVEsYUFLL0IsSUFBSXlCLEVBQWFwQyxTQUFTMEIsY0FBYyxVQUN4Q1UsRUFBV1osVUFBWSw4QkFDdkJZLEVBQVcxQixVQUFVQyxJQUFJLE9BQVEsTUFBTyxpQkFDeEN5QixFQUFXSCxpQkFBaUIsU0FBUyxXQUdqQyxJQUFJSSxFQUFRckMsU0FBU0MsZUFBZSxTQUNwQ29DLEVBQU0zQixVQUFVUSxPQUFPLFVBQ3ZCLElBQUlvQixFQUFpQnRDLFNBQVNDLGVBQWUsZUFDN0NxQyxFQUFlNUYsTUFBUTZCLEVBQUtTLEtBQ1JnQixTQUFTQyxlQUFlLGNBQzlCZ0MsaUJBQWlCLFNBQVMsV0FDcENJLEVBQU0zQixVQUFVQyxJQUFJLFNBQ3hCLElBRUEsSUFBSTRCLEVBQWdCdkMsU0FBU0MsZUFBZSxrQkFDNUNzQyxFQUFjTixpQkFBaUIsU0FBUyxTQUFTTyxJQUM3QyxJQUFJMUQsRUFBVXdELEVBQWU1RixNQUN6Qm9DLElBQ0FnQixFQUFTbEIsU0FBUyxDQUFFRixHQUFJSCxFQUFLRyxHQUFJSSxRQUFTQSxLQUMxQyxFQUFJVixFQUFzQnhCLHdCQUF3QixRQUFTa0QsRUFBU3pCLE9BQ3BFK0MsRUFBWXRCLEVBQVNYLFlBQVksUUFDakNtRCxFQUFlNUYsTUFBUSxHQUN2QjJGLEVBQU0zQixVQUFVQyxJQUFJLFVBQ3BCNEIsRUFBY0Usb0JBQW9CLFFBQVNELEdBRW5ELEdBQ0osSUFLQSxJQUFJRSxFQUFlMUMsU0FBUzBCLGNBQWMsVUFDMUNnQixFQUFhbEIsVUFBWSxxREFDekJrQixFQUFhaEMsVUFBVUMsSUFBSSxPQUFRLE9BQ25DK0IsRUFBYVQsaUJBQWlCLFNBQVMsV0FHbkMsSUFBSVUsRUFBMEIzQyxTQUFTQyxlQUFlLDJCQUN0RDBDLEVBQXdCakMsVUFBVVEsT0FBTyxVQUN6QyxJQUFJMEIsRUFBc0I1QyxTQUFTQyxlQUFlLGlCQUM5QzRDLEVBQXFCN0MsU0FBU0MsZUFBZSxnQkFDN0M2QyxFQUFzQixXQUN0QmhELEVBQVNyQixXQUFXRixFQUFLRyxLQUN6QixFQUFJTixFQUFzQnhCLHdCQUF3QixRQUFTa0QsRUFBU3pCLE9BQ3BFK0MsRUFBWXRCLEVBQVNYLFlBQVksUUFDakN3RCxFQUF3QmpDLFVBQVVDLElBQUksVUFDdENpQyxFQUFvQkgsb0JBQW9CLFFBQVNLLEdBQ2pERCxFQUFtQkosb0JBQW9CLFFBQVNNLEVBQ3BELEVBQ0lBLEVBQXFCLFdBQ3JCSixFQUF3QmpDLFVBQVVDLElBQUksVUFDdENpQyxFQUFvQkgsb0JBQW9CLFFBQVNLLEdBQ2pERCxFQUFtQkosb0JBQW9CLFFBQVNNLEVBQ3BELEVBQ0FILEVBQW9CWCxpQkFBaUIsUUFBU2EsR0FDOUNELEVBQW1CWixpQkFBaUIsUUFBU2MsRUFDakQsSUFFQXRCLEVBQVNRLGlCQUFpQixhQUFhLFNBQVVwQixHQUM3QyxJQUFJaEMsRUFDMEIsUUFBN0JBLEVBQUtnQyxFQUFNbUMsb0JBQWlDLElBQVBuRSxHQUF5QkEsRUFBR29FLFFBQVEsYUFBYzFFLEVBQUtHLEdBQUdtRCxXQUNwRyxJQUNBSixFQUFTUSxpQkFBaUIsWUFBWSxTQUFVcEIsR0FDNUNBLEVBQU1xQyxnQkFDVixJQUNBekIsRUFBU1EsaUJBQWlCLFFBQVEsU0FBVXBCLEdBQ3hDLElBQUloQyxFQUdKZ0MsRUFBTXFDLGlCQUNOLElBQUlDLEVBQWdCQyxVQUF3QyxRQUE3QnZFLEVBQUtnQyxFQUFNbUMsb0JBQWlDLElBQVBuRSxPQUFnQixFQUFTQSxFQUFHd0UsUUFBUSxnQkFBa0IsSUFDMUgsSUFBS0MsTUFBTUgsR0FBZ0IsQ0FDdkIsSUFBSUksRUFBaUJILFNBQVMzQixFQUFTTixRQUFRUyxRQUFVLElBQ3JENEIsRUFBYzFELEVBQVN6QixNQUFNb0YsTUFBSyxTQUFVbEYsR0FBUSxPQUFPQSxFQUFLRyxLQUFPeUUsQ0FBZSxJQUN0Rk8sRUFBYTVELEVBQVN6QixNQUFNb0YsTUFBSyxTQUFVbEYsR0FBUSxPQUFPQSxFQUFLRyxLQUFPNkUsQ0FBZ0IsSUFDMUYsR0FBSUMsR0FBZUUsRUFBWSxDQUMzQixJQUFJQyxFQUFlN0QsRUFBU3pCLE1BQU11RixRQUFRSixHQUN0Q0ssRUFBYy9ELEVBQVN6QixNQUFNdUYsUUFBUUYsR0FFekM1RCxFQUFTekIsTUFBTXlGLE9BQU9ILEVBQWMsR0FDcEM3RCxFQUFTekIsTUFBTXlGLE9BQU9ELEVBQWEsRUFBR0wsSUFDdEMsRUFBSXBGLEVBQXNCeEIsd0JBQXdCLFFBQVNrRCxFQUFTekIsT0FDcEUrQyxFQUFZdEIsRUFBU1gsWUFBWSxPQUNyQyxDQUNKLENBQ0osSUFDQXNDLEVBQVNzQyxZQUFZakMsR0FDckJMLEVBQVNzQyxZQUFZN0IsR0FDckJULEVBQVNzQyxZQUFZM0IsR0FDckJYLEVBQVNzQyxZQUFZckIsR0FDckJuQixFQUFTd0MsWUFBWXRDLEVBQ3pCLElBRVIsQ0F2SkFuQixFQUFjMkIsaUJBQWlCLFNBN0UvQixXQUNJNUIsRUFBYUssVUFBVVEsT0FBTyxTQUNsQyxJQTRFQVgsRUFBd0IwQixpQkFBaUIsUUFBU3hCLEdBQ2xERCxFQUFpQnlCLGlCQUFpQixTQWpFbEMsV0FDSSxJQUFJK0IsRUFBWWhFLFNBQVNDLGVBQWUsV0FDcENpQyxFQUFXOEIsRUFBVXRILE1BQ3pCLEdBQXdCLEtBQXBCd0YsRUFBUytCLE9BQWUsQ0FLeEIsSUFBSUMsRUFBVSxDQUNWeEYsR0FBSW9CLEVBQVN6QixNQUFNUixPQUFTLEVBQzVCbUIsS0FBTWtELEVBQ05oRCxXQUFXLEdBTWZZLEVBQVN4QixRQUFRNEYsR0FDakI5QyxFQUFZdEIsRUFBU1gsWUFBWSxRQUlqQzZFLEVBQVV0SCxNQUFRLEdBQ2xCK0QsS0FDQSxFQUFJckMsRUFBc0J4Qix3QkFBd0IsUUFBU2tELEVBQVN6QixNQUN4RSxDQUNKLElBd0NBMEIsRUFBVWtDLGlCQUFpQixRQUFTckIsR0FDcENWLEVBQWErQixpQkFBaUIsUUFBU3JCLEdBQ3ZDVCxFQUFnQjhCLGlCQUFpQixRQUFTckIsR0FDMUNSLEVBQXFCNkIsaUJBQWlCLFNBaEJ0QyxXQUNJbkMsRUFBU1YsdUJBQ1QsRUFBSWhCLEVBQXNCeEIsd0JBQXdCLFFBQVNrRCxFQUFTekIsT0FDcEUrQyxFQUFZdEIsRUFBU1gsWUFBWSxRQUNuQmEsU0FBU2UsaUJBQWlCLHVCQUNoQ0MsU0FBUSxTQUFVQyxHQUFPLE9BQU9BLEVBQUlQLFVBQVVRLE9BQU8sY0FBZSxhQUFlLEdBQy9GLElBaUtBLElBQUlpRCxHQUFhLEVBQUl0RSxFQUFzQmxELHlCQUF5QixTQUloRXdILElBQ0FyRSxFQUFTekIsTUFBUThGLEdBVXJCL0MsRUFBWXRCLEVBQVNYLFlBQVksTyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC1hcHAvLi9zcmMvbG9jYWxfc3RvcmFnZV91dGlscy50cyIsIndlYnBhY2s6Ly90b2RvLWxpc3QtYXBwLy4vc3JjL3RvX2RvX2xpc3QudHMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0LWFwcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90b2RvLWxpc3QtYXBwLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5nZXREYXRhRnJvbUxvY2FsU3RvcmFnZSA9IGV4cG9ydHMuc2F2ZURhdGFUb0xvY2FsU3RvcmFnZSA9IHZvaWQgMDtcbi8qKlxuICogU2F2ZXMgZGF0YSB0byB0aGUgbG9jYWwgc3RvcmFnZSB1c2luZyB0aGUgcHJvdmlkZWQga2V5LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSBUaGUga2V5IHVuZGVyIHdoaWNoIHRoZSBkYXRhIHdpbGwgYmUgc3RvcmVkLlxuICogQHBhcmFtIHsqfSBkYXRhIC0gVGhlIGRhdGEgdG8gYmUgc2F2ZWQgaW4gdGhlIGxvY2FsIHN0b3JhZ2UuXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gc2F2ZURhdGFUb0xvY2FsU3RvcmFnZShrZXksIGRhdGEpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbn1cbmV4cG9ydHMuc2F2ZURhdGFUb0xvY2FsU3RvcmFnZSA9IHNhdmVEYXRhVG9Mb2NhbFN0b3JhZ2U7XG4vKipcbiAqIFJldHJpZXZlcyBkYXRhIGZyb20gdGhlIGxvY2FsIHN0b3JhZ2UgdXNpbmcgdGhlIHByb3ZpZGVkIGtleS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gVGhlIGtleSB0byBsb29rIHVwIGluIHRoZSBsb2NhbCBzdG9yYWdlLlxuICogQHJldHVybnMgeyp9IFRoZSByZXRyaWV2ZWQgZGF0YSwgb3IgbnVsbCBpZiBubyBkYXRhIGlzIGZvdW5kIGZvciB0aGUgZ2l2ZW4ga2V5LlxuICovXG5mdW5jdGlvbiBnZXREYXRhRnJvbUxvY2FsU3RvcmFnZShrZXkpIHtcbiAgICB2YXIgZGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgcmV0dXJuIGRhdGEgPyBKU09OLnBhcnNlKGRhdGEpIDogbnVsbDtcbn1cbmV4cG9ydHMuZ2V0RGF0YUZyb21Mb2NhbFN0b3JhZ2UgPSBnZXREYXRhRnJvbUxvY2FsU3RvcmFnZTtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVG9Eb0xpc3RJbXBsID0gdm9pZCAwO1xudmFyIGxvY2FsX3N0b3JhZ2VfdXRpbHNfMSA9IHJlcXVpcmUoXCIuL2xvY2FsX3N0b3JhZ2VfdXRpbHNcIik7XG4vKipcbiAqIEBjbGFzcyBUb0RvTGlzdEltcGxcbiAqIEBpbXBsZW1lbnRzIHtUb0RvTGlzdH1cbiAqIEBkZXNjcmlwdGlvbiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgVG9Eb0xpc3QgaW50ZXJmYWNlLlxuICovXG52YXIgVG9Eb0xpc3RJbXBsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFRvRG9MaXN0SW1wbCgpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBBcnJheSB0byBzdG9yZSB0YXNrc1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50YXNrcyA9IFtdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gQWRkcyBhIG5ldyB0YXNrIHRvIHRoZSBsaXN0IG9mIHRhc2tzLlxuICAgICAqIEBwYXJhbSB7VGFza30gdGFzayAtIFRoZSB0YXNrIHRvIGJlIGFkZGVkLlxuICAgICAqL1xuICAgIFRvRG9MaXN0SW1wbC5wcm90b3R5cGUuYWRkVGFzayA9IGZ1bmN0aW9uICh0YXNrKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGQgdGhlIHRhc2sgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJyYXlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGFza3MudW5zaGlmdCh0YXNrKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNhdmUgdGFza3MgdG8gbG9jYWwgc3RvcmFnZVxuICAgICAgICAgKi9cbiAgICAgICAgKDAsIGxvY2FsX3N0b3JhZ2VfdXRpbHNfMS5zYXZlRGF0YVRvTG9jYWxTdG9yYWdlKSgndGFza3MnLCB0aGlzLnRhc2tzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgYSB0YXNrIGJ5IGl0cyBJRC5cbiAgICAgKiBAcGFyYW0gaWQgLSBUaGUgSUQgb2YgdGhlIHRhc2sgdG8gYmUgZGVsZXRlZC5cbiAgICAgKi9cbiAgICBUb0RvTGlzdEltcGwucHJvdG90eXBlLmRlbGV0ZVRhc2sgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbW92ZSB0YXNrIHdpdGggbWF0Y2hpbmcgSURcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGFza3MgPSB0aGlzLnRhc2tzLmZpbHRlcihmdW5jdGlvbiAodGFzaykgeyByZXR1cm4gdGFzay5pZCAhPT0gaWQ7IH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2F2ZSB1cGRhdGVkIHRhc2tzIHRvIGxvY2FsIHN0b3JhZ2VcbiAgICAgICAgICovXG4gICAgICAgICgwLCBsb2NhbF9zdG9yYWdlX3V0aWxzXzEuc2F2ZURhdGFUb0xvY2FsU3RvcmFnZSkoJ3Rhc2tzJywgdGhpcy50YXNrcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gRWRpdHMgYSB0YXNrJ3MgbmFtZSBiYXNlZCBvbiBpdHMgSUQuXG4gICAgICogQHBhcmFtIHtFZGl0VGFza30gZWRpdFRhc2sgLSBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgdGFzayBJRCBhbmQgdGhlIG5ldyBuYW1lLlxuICAgICAqL1xuICAgIFRvRG9MaXN0SW1wbC5wcm90b3R5cGUuZWRpdFRhc2sgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIGlkID0gX2EuaWQsIG5ld05hbWUgPSBfYS5uZXdOYW1lO1xuICAgICAgICB0aGlzLnRhc2tzID0gdGhpcy50YXNrcy5tYXAoZnVuY3Rpb24gKHRhc2spIHtcbiAgICAgICAgICAgIGlmICh0YXNrLmlkID09PSBpZCkge1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZSB0YXNrIG5hbWUgZm9yIHRoZSBzcGVjaWZpZWQgSURcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIHRhc2spLCB7IG5hbWU6IG5ld05hbWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGFzaztcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTYXZlIHVwZGF0ZWQgdGFza3MgdG8gbG9jYWwgc3RvcmFnZVxuICAgICAgICAgKi9cbiAgICAgICAgKDAsIGxvY2FsX3N0b3JhZ2VfdXRpbHNfMS5zYXZlRGF0YVRvTG9jYWxTdG9yYWdlKSgndGFza3MnLCB0aGlzLnRhc2tzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBUb2dnbGVzIGEgdGFzaydzIGNvbXBsZXRpb24gc3RhdHVzIGJhc2VkIG9uIGl0cyBJRC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaWQgLSBUaGUgSUQgb2YgdGhlIHRhc2sgdG8gdG9nZ2xlLlxuICAgICAqL1xuICAgIFRvRG9MaXN0SW1wbC5wcm90b3R5cGUudG9nZ2xlVGFza0NvbXBsZXRpb24gPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgdGhpcy50YXNrcyA9IHRoaXMudGFza3MubWFwKGZ1bmN0aW9uICh0YXNrKSB7XG4gICAgICAgICAgICBpZiAodGFzay5pZCA9PT0gaWQpIHtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUb2dnbGUgY29tcGxldGlvbiBzdGF0dXMgZm9yIHRoZSBzcGVjaWZpZWQgSURcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICB0YXNrLmNvbXBsZXRlZCA9ICF0YXNrLmNvbXBsZXRlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0YXNrO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAgKiBAZGVzY3JpcHRpb24gRmlsdGVycyB0YXNrcyBiYXNlZCBvbiB0aGUgc3BlY2lmaWVkIGZpbHRlci5cbiAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbHRlciAtIFRoZSBmaWx0ZXIgdG8gYXBwbHkgKCdhY3RpdmUnLCAnY29tcGxldGVkJywgb3IgJ2FsbCcpLlxuICAgICAgKiBAcmV0dXJucyB7VGFza1tdfSBBbiBhcnJheSBvZiB0YXNrcyB0aGF0IG1hdGNoIHRoZSBmaWx0ZXIuXG4gICAgICAqL1xuICAgIFRvRG9MaXN0SW1wbC5wcm90b3R5cGUuZmlsdGVyVGFza3MgPSBmdW5jdGlvbiAoZmlsdGVyKSB7XG4gICAgICAgIHN3aXRjaCAoZmlsdGVyKSB7XG4gICAgICAgICAgICBjYXNlICdhY3RpdmUnOlxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEZpbHRlciBhY3RpdmUgdGFza3NcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50YXNrcy5maWx0ZXIoZnVuY3Rpb24gKHRhc2spIHsgcmV0dXJuICF0YXNrLmNvbXBsZXRlZDsgfSk7XG4gICAgICAgICAgICBjYXNlICdjb21wbGV0ZWQnOlxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEZpbHRlciBjb21wbGV0ZWQgdGFza3NcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50YXNrcy5maWx0ZXIoZnVuY3Rpb24gKHRhc2spIHsgcmV0dXJuIHRhc2suY29tcGxldGVkOyB9KTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUmV0dXJuIGFsbCB0YXNrcyBieSBkZWZhdWx0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGFza3M7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBDbGVhcnMgY29tcGxldGVkIHRhc2tzIGZyb20gdGhlIHRhc2sgbGlzdC5cbiAgICAgKi9cbiAgICBUb0RvTGlzdEltcGwucHJvdG90eXBlLmNsZWFyQ29tcGxldGVkVGFza3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW1vdmUgY29tcGxldGVkIHRhc2tzXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRhc2tzID0gdGhpcy50YXNrcy5maWx0ZXIoZnVuY3Rpb24gKHRhc2spIHsgcmV0dXJuICF0YXNrLmNvbXBsZXRlZDsgfSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTYXZlIHVwZGF0ZWQgdGFza3MgdG8gbG9jYWwgc3RvcmFnZVxuICAgICAgICAgKi9cbiAgICAgICAgKDAsIGxvY2FsX3N0b3JhZ2VfdXRpbHNfMS5zYXZlRGF0YVRvTG9jYWxTdG9yYWdlKSgndGFza3MnLCB0aGlzLnRhc2tzKTtcbiAgICB9O1xuICAgIHJldHVybiBUb0RvTGlzdEltcGw7XG59KCkpO1xuZXhwb3J0cy5Ub0RvTGlzdEltcGwgPSBUb0RvTGlzdEltcGw7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgdG9fZG9fbGlzdF8xID0gcmVxdWlyZShcIi4vdG9fZG9fbGlzdFwiKTtcbnZhciBsb2NhbF9zdG9yYWdlX3V0aWxzXzEgPSByZXF1aXJlKFwiLi9sb2NhbF9zdG9yYWdlX3V0aWxzXCIpO1xudmFyIGxvY2FsX3N0b3JhZ2VfdXRpbHNfMiA9IHJlcXVpcmUoXCIuL2xvY2FsX3N0b3JhZ2VfdXRpbHNcIik7XG4vKipcbiAqIEluaXRpYWxpemUgVG9Eb0xpc3QgaW5zdGFuY2UuXG4gKiBAdHlwZSB7VG9Eb0xpc3RJbXBsfVxuICovXG52YXIgdG9kb0xpc3QgPSBuZXcgdG9fZG9fbGlzdF8xLlRvRG9MaXN0SW1wbCgpO1xuLyoqXG4gKiBET00gZWxlbWVudHMgZm9yIHRhc2sgZmlsdGVyaW5nLlxuICogQHR5cGUge0hUTUxCdXR0b25FbGVtZW50fVxuICovXG52YXIgYWxsQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FsbEJ1dHRvbicpO1xuLyoqXG4gKiBET00gZWxlbWVudHMgZm9yIHRhc2sgZmlsdGVyaW5nLlxuICogQHR5cGUge0hUTUxCdXR0b25FbGVtZW50fVxuICovXG52YXIgYWN0aXZlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjdGl2ZUJ1dHRvbicpO1xuLyoqXG4gKiBET00gZWxlbWVudHMgZm9yIHRhc2sgZmlsdGVyaW5nLlxuICogQHR5cGUge0hUTUxCdXR0b25FbGVtZW50fVxuICovXG52YXIgY29tcGxldGVkQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbXBsZXRlZEJ1dHRvbicpO1xuLyoqXG4gKiBET00gZWxlbWVudHMgZm9yIHRhc2sgZmlsdGVyaW5nLlxuICogQHR5cGUge0hUTUxCdXR0b25FbGVtZW50fVxuICovXG52YXIgY2xlYXJDb21wbGV0ZWRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xlYXJDb21wbGV0ZWRCdXR0b24nKTtcbi8qKlxuICogQWRkIFRhc2sgTW9kYWwgZWxlbWVudHMuXG4gKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gKi9cbnZhciBhZGRUYXNrTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkVGFza01vZGFsJyk7XG4vKipcbiAqIERPTSBlbGVtZW50IGZvciB0aGUgYWRkIHRhc2sgYnV0dG9uLlxuICogQHR5cGUge0hUTUxCdXR0b25FbGVtZW50fVxuICovXG52YXIgYWRkVGFza0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRUYXNrQnV0dG9uJyk7XG4vKipcbiAqIERPTSBlbGVtZW50IGZvciB0aGUgY2xvc2UgYWRkIHRhc2sgbW9kYWwgYnV0dG9uLlxuICogQHR5cGUge0hUTUxFbGVtZW50fVxuICovXG52YXIgY2xvc2VBZGRUYXNrTW9kYWxCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2VBZGRUYXNrTW9kYWwnKTtcbi8qKlxuICogRE9NIGVsZW1lbnQgZm9yIHRoZSBhZGQgbmV3IHRhc2sgYnV0dG9uLlxuICogQHR5cGUge0hUTUxCdXR0b25FbGVtZW50fVxuICovXG52YXIgYWRkTmV3VGFza0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGROZXdUYXNrJyk7XG4vKipcbiAqIEZ1bmN0aW9uIHRvIG9wZW4gdGhlIGFkZCB0YXNrIG1vZGFsLlxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIG9wZW5BZGRUYXNrTW9kYWwoKSB7XG4gICAgYWRkVGFza01vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xufVxuLyoqXG4gKiBGdW5jdGlvbiB0byBjbG9zZSB0aGUgYWRkIHRhc2sgbW9kYWwuXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gY2xvc2VBZGRUYXNrTW9kYWwoKSB7XG4gICAgYWRkVGFza01vZGFsLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xufVxuLyoqXG4gKiBGdW5jdGlvbiB0byBhZGQgYSBuZXcgdGFzay5cbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiBhZGROZXdUYXNrKCkge1xuICAgIHZhciB0YXNrSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3VGFzaycpO1xuICAgIHZhciB0YXNrTmFtZSA9IHRhc2tJbnB1dC52YWx1ZTtcbiAgICBpZiAodGFza05hbWUudHJpbSgpICE9PSAnJykge1xuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlIGEgbmV3IHRhc2suXG4gICAgICAgICAqIEB0eXBlIHtUYXNrfVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIG5ld1Rhc2sgPSB7XG4gICAgICAgICAgICBpZDogdG9kb0xpc3QudGFza3MubGVuZ3RoICsgMSxcbiAgICAgICAgICAgIG5hbWU6IHRhc2tOYW1lLFxuICAgICAgICAgICAgY29tcGxldGVkOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZCB0aGUgbmV3IHRhc2sgdG8gdGhlIGxpc3QuXG4gICAgICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAgICAgKi9cbiAgICAgICAgdG9kb0xpc3QuYWRkVGFzayhuZXdUYXNrKTtcbiAgICAgICAgcmVuZGVyVGFza3ModG9kb0xpc3QuZmlsdGVyVGFza3MoJ2FsbCcpKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlc2V0IGlucHV0IGFuZCBjbG9zZSBtb2RhbFxuICAgICAgICAgKi9cbiAgICAgICAgdGFza0lucHV0LnZhbHVlID0gJyc7XG4gICAgICAgIGNsb3NlQWRkVGFza01vZGFsKCk7XG4gICAgICAgICgwLCBsb2NhbF9zdG9yYWdlX3V0aWxzXzEuc2F2ZURhdGFUb0xvY2FsU3RvcmFnZSkoJ3Rhc2tzJywgdG9kb0xpc3QudGFza3MpO1xuICAgIH1cbn1cbi8qKlxuICogVG9nZ2xlIGJ1dHRvbiBzdHlsZSBiYXNlZCBvbiB0aGUgc2VsZWN0ZWQgZmlsdGVyLlxuICogQHBhcmFtIHtIVE1MQnV0dG9uRWxlbWVudH0gY2xpY2tlZEJ1dHRvbiAtIFRoZSBidXR0b24gdGhhdCB3YXMgY2xpY2tlZC5cbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiB0b2dnbGVCdXR0b24oY2xpY2tlZEJ1dHRvbikge1xuICAgIHZhciBidXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uW2RhdGEtZmlsdGVyXScpO1xuICAgIGJ1dHRvbnMuZm9yRWFjaChmdW5jdGlvbiAoYnRuKSB7IHJldHVybiBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYmctYmx1ZS01MDAnLCAndGV4dC13aGl0ZScpOyB9KTtcbiAgICBjbGlja2VkQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2JnLWJsdWUtNTAwJywgJ3JvdW5kZWQtbWQnLCAndGV4dC13aGl0ZScpO1xuICAgIHZhciBmaWx0ZXIgPSBjbGlja2VkQnV0dG9uLmRhdGFzZXQuZmlsdGVyIHx8ICdhbGwnO1xuICAgIHRvZG9MaXN0LmZpbHRlclRhc2tzKGZpbHRlcik7XG4gICAgcmVuZGVyVGFza3ModG9kb0xpc3QuZmlsdGVyVGFza3MoZmlsdGVyKSk7XG59XG4vKipcbiAqIEhhbmRsZSBjb21wbGV0aW9uIHN0YXR1cyBjaGFuZ2UgZXZlbnQuXG4gKiBAcGFyYW0ge0V2ZW50fSBldmVudCAtIFRoZSBldmVudCB0cmlnZ2VyZWQgYnkgY29tcGxldGlvbiBzdGF0dXMgY2hhbmdlLlxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIGhhbmRsZUNvbXBsZXRpb25TdGF0dXMoZXZlbnQpIHtcbiAgICB2YXIgYnV0dG9uID0gZXZlbnQudGFyZ2V0O1xuICAgIHRvZ2dsZUJ1dHRvbihidXR0b24pO1xufVxuLyoqXG4gKiBDbGVhciBjb21wbGV0ZWQgdGFza3MuXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gY2xlYXJDb21wbGV0ZWRUYXNrcygpIHtcbiAgICB0b2RvTGlzdC5jbGVhckNvbXBsZXRlZFRhc2tzKCk7XG4gICAgKDAsIGxvY2FsX3N0b3JhZ2VfdXRpbHNfMS5zYXZlRGF0YVRvTG9jYWxTdG9yYWdlKSgndGFza3MnLCB0b2RvTGlzdC50YXNrcyk7XG4gICAgcmVuZGVyVGFza3ModG9kb0xpc3QuZmlsdGVyVGFza3MoJ2FsbCcpKTtcbiAgICB2YXIgYnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbltkYXRhLWZpbHRlcl0nKTtcbiAgICBidXR0b25zLmZvckVhY2goZnVuY3Rpb24gKGJ0bikgeyByZXR1cm4gYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLWJsdWUtNTAwJywgJ3RleHQtd2hpdGUnKTsgfSk7XG59XG4vKipcbiAqIEV2ZW50IGxpc3RlbmVycyBmb3IgVUkgaW50ZXJhY3Rpb25zLlxuICovXG5hZGRUYXNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlbkFkZFRhc2tNb2RhbCk7XG5jbG9zZUFkZFRhc2tNb2RhbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlQWRkVGFza01vZGFsKTtcbmFkZE5ld1Rhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhZGROZXdUYXNrKTtcbmFsbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUNvbXBsZXRpb25TdGF0dXMpO1xuYWN0aXZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ29tcGxldGlvblN0YXR1cyk7XG5jb21wbGV0ZWRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDb21wbGV0aW9uU3RhdHVzKTtcbmNsZWFyQ29tcGxldGVkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xlYXJDb21wbGV0ZWRUYXNrcyk7XG4vKipcbiAqIFJlbmRlcnMgdGhlIHRhc2tzIGluIHRoZSBVSSBieSBjcmVhdGluZyBIVE1MIGVsZW1lbnRzIGZvciBlYWNoIHRhc2suXG4gKlxuICogQHBhcmFtIHtUYXNrW119IHRhc2tzIC0gQW4gYXJyYXkgb2YgVGFzayBvYmplY3RzIHRvIGJlIHJlbmRlcmVkLlxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIHJlbmRlclRhc2tzKHRhc2tzKSB7XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0YXNrIGxpc3QgZWxlbWVudCBmcm9tIHRoZSBET01cbiAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnQgfCBudWxsfVxuICAgICAqL1xuICAgIHZhciB0YXNrTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrTGlzdCcpO1xuICAgIC8vQ2hlY2sgaWYgdGhlIHRhc2sgbGlzdCBlbGVtZW50IGV4aXN0c1xuICAgIGlmICh0YXNrTGlzdCkge1xuICAgICAgICAvLyBDbGVhciB0aGUgZXhpc3RpbmcgY29udGVudCBpbiB0aGUgdGFzayBsaXN0XG4gICAgICAgIHRhc2tMaXN0LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggZWFjaCB0YXNrIGFuZCBjcmVhdGUgdGhlIGNvcnJlc3BvbmRpbmcgSFRNTCBlbGVtZW50c1xuICAgICAgICB0YXNrcy5mb3JFYWNoKGZ1bmN0aW9uICh0YXNrKSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZSBhIHRhc2sgaXRlbSBlbGVtZW50XG4gICAgICAgICAgICAgKiBAdHlwZSB7SFRNTExJRWxlbWVudH1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdmFyIHRhc2tJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgIHRhc2tJdGVtLmRyYWdnYWJsZSA9IHRydWU7XG4gICAgICAgICAgICB0YXNrSXRlbS5kYXRhc2V0LnRhc2tJZCA9IHRhc2suaWQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHRhc2tJdGVtLmNsYXNzTGlzdC5hZGQoJ2ZsZXgnLCAnanVzdGlmeS1iZXR3ZWVuJywgJ2JvcmRlcicsICdwLTInLCAnbWItNCcpO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGUgYSBjaGVja2JveCBmb3IgdGFzayBjb21wbGV0aW9uXG4gICAgICAgICAgICAgKiBAdHlwZSB7SFRNTElucHV0RWxlbWVudH1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdmFyIGNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgIGNoZWNrYm94LnR5cGUgPSAnY2hlY2tib3gnO1xuICAgICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHRhc2suY29tcGxldGVkO1xuICAgICAgICAgICAgLy8gQWRkIGFuIGV2ZW50IGxpc3RlbmVyIHRvIGhhbmRsZSB0YXNrIGNvbXBsZXRpb24gY2hhbmdlc1xuICAgICAgICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRvZG9MaXN0LnRvZ2dsZVRhc2tDb21wbGV0aW9uKHRhc2suaWQpO1xuICAgICAgICAgICAgICAgICgwLCBsb2NhbF9zdG9yYWdlX3V0aWxzXzEuc2F2ZURhdGFUb0xvY2FsU3RvcmFnZSkoJ3Rhc2tzJywgdG9kb0xpc3QudGFza3MpO1xuICAgICAgICAgICAgICAgIHJlbmRlclRhc2tzKHRvZG9MaXN0LmZpbHRlclRhc2tzKCdhbGwnKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlIGEgc3BhbiBmb3IgZGlzcGxheWluZyB0aGUgdGFzayBuYW1lXG4gICAgICAgICAgICAgKiBAdHlwZSB7SFRNTFNwYW5FbGVtZW50fVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB2YXIgdGFza05hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICB0YXNrTmFtZS50ZXh0Q29udGVudCA9IHRhc2submFtZTtcbiAgICAgICAgICAgIHRhc2tOYW1lLmNsYXNzTGlzdC5hZGQoJ21sLTQnLCAnYmFzaXMtMy80Jyk7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZSBhbiBlZGl0IGJ1dHRvbiB3aXRoIGFuIGV2ZW50IGxpc3RlbmVyXG4gICAgICAgICAgICAgKiBAdHlwZSB7SFRNTEJ1dHRvbkVsZW1lbnR9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHZhciBlZGl0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgICBlZGl0QnV0dG9uLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImZhcyBmYS1lZGl0XCI+PC9pPic7XG4gICAgICAgICAgICBlZGl0QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ21sLTInLCAncC0yJywgJ3RleHQtYmx1ZS01MDAnKTtcbiAgICAgICAgICAgIGVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIGVkaXRpbmcgdGhlIHRhc2sgd2hlbiB0aGUgZWRpdCBidXR0b24gaXMgY2xpY2tlZFxuICAgICAgICAgICAgICAgIC8vIGludm9sdmVzIGRpc3BsYXlpbmcgYSBtb2RhbCwgYWxsb3dpbmcgdGhlIHVzZXIgdG8gdXBkYXRlIHRoZSB0YXNrIG5hbWVcbiAgICAgICAgICAgICAgICB2YXIgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwnKTtcbiAgICAgICAgICAgICAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3TmFtZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3VGFza05hbWUnKTtcbiAgICAgICAgICAgICAgICBuZXdOYW1lRWxlbWVudC52YWx1ZSA9IHRhc2submFtZTtcbiAgICAgICAgICAgICAgICB2YXIgY2xvc2VNb2RhbEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbG9zZU1vZGFsJyk7XG4gICAgICAgICAgICAgICAgY2xvc2VNb2RhbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gVXBkYXRpbmcgdGhlIHRhc2sgaW4gdGhlIHRvZG9MaXN0XG4gICAgICAgICAgICAgICAgdmFyIHVwZGF0ZVRhc2tCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXBkYXRlVGFza05hbWUnKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gaGFuZGxlVXBkYXRlVGFza0NsaWNrKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3TmFtZSA9IG5ld05hbWVFbGVtZW50LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3TmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9kb0xpc3QuZWRpdFRhc2soeyBpZDogdGFzay5pZCwgbmV3TmFtZTogbmV3TmFtZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICgwLCBsb2NhbF9zdG9yYWdlX3V0aWxzXzEuc2F2ZURhdGFUb0xvY2FsU3RvcmFnZSkoJ3Rhc2tzJywgdG9kb0xpc3QudGFza3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyVGFza3ModG9kb0xpc3QuZmlsdGVyVGFza3MoJ2FsbCcpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld05hbWVFbGVtZW50LnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRhc2tCdG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVVcGRhdGVUYXNrQ2xpY2spO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlIGEgZGVsZXRlIGJ1dHRvbiB3aXRoIGFuIGV2ZW50IGxpc3RlbmVyXG4gICAgICAgICAgICAgKiBAdHlwZSB7SFRNTEJ1dHRvbkVsZW1lbnR9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHZhciBkZWxldGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgIGRlbGV0ZUJ1dHRvbi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS10cmFzaC1jYW4gdGV4dC1yZWQtNjAwXCI+PC9pPic7XG4gICAgICAgICAgICBkZWxldGVCdXR0b24uY2xhc3NMaXN0LmFkZCgnbWwtMicsICdwLTInKTtcbiAgICAgICAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgZGVsZXRpbmcgdGhlIHRhc2sgd2hlbiB0aGUgZGVsZXRlIGJ1dHRvbiBpcyBjbGlja2VkXG4gICAgICAgICAgICAgICAgLy8gTWF5IGludm9sdmUgY29uZmlybWluZyB0aGUgZGVsZXRpb24gYW5kIHJlbW92aW5nIHRoZSB0YXNrIGZyb20gdGhlIHRvZG9MaXN0XG4gICAgICAgICAgICAgICAgdmFyIGRlbGV0ZUNvbmZpcm1hdGlvbk1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlbGV0ZUNvbmZpcm1hdGlvbk1vZGFsJyk7XG4gICAgICAgICAgICAgICAgZGVsZXRlQ29uZmlybWF0aW9uTW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbmZpcm1EZWxldGVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlybURlbGV0ZScpO1xuICAgICAgICAgICAgICAgIHZhciBjYW5jZWxEZWxldGVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FuY2VsRGVsZXRlJyk7XG4gICAgICAgICAgICAgICAgdmFyIGhhbmRsZUNvbmZpcm1EZWxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9MaXN0LmRlbGV0ZVRhc2sodGFzay5pZCk7XG4gICAgICAgICAgICAgICAgICAgICgwLCBsb2NhbF9zdG9yYWdlX3V0aWxzXzEuc2F2ZURhdGFUb0xvY2FsU3RvcmFnZSkoJ3Rhc2tzJywgdG9kb0xpc3QudGFza3MpO1xuICAgICAgICAgICAgICAgICAgICByZW5kZXJUYXNrcyh0b2RvTGlzdC5maWx0ZXJUYXNrcygnYWxsJykpO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVDb25maXJtYXRpb25Nb2RhbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlybURlbGV0ZUJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUNvbmZpcm1EZWxldGUpO1xuICAgICAgICAgICAgICAgICAgICBjYW5jZWxEZWxldGVCdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDYW5jZWxEZWxldGUpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIGhhbmRsZUNhbmNlbERlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlQ29uZmlybWF0aW9uTW9kYWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpcm1EZWxldGVCdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDb25maXJtRGVsZXRlKTtcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsRGVsZXRlQnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2FuY2VsRGVsZXRlKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbmZpcm1EZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDb25maXJtRGVsZXRlKTtcbiAgICAgICAgICAgICAgICBjYW5jZWxEZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDYW5jZWxEZWxldGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBBZGQgZXZlbnQgbGlzdGVuZXJzIGZvciBkcmFnIGFuZCBkcm9wIGZ1bmN0aW9uYWxpdHkgdG8gYWxsb3cgdGFzayByZW9yZGVyaW5nXG4gICAgICAgICAgICB0YXNrSXRlbS5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgKF9hID0gZXZlbnQuZGF0YVRyYW5zZmVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2V0RGF0YSgndGV4dC9wbGFpbicsIHRhc2suaWQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRhc2tJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGFza0l0ZW0uYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgZHJvcHBpbmcgYSBkcmFnZ2VkIHRhc2sgdG8gcmVvcmRlciB0aGUgdGFza3NcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGludm9sdmVzIHVwZGF0aW5nIHRoZSB0YXNrIG9yZGVyIGluIHRoZSB0b2RvTGlzdCBhbmQgc2F2aW5nIHRvIGxvY2FsU3RvcmFnZVxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdmFyIGRyYWdnZWRUYXNrSWQgPSBwYXJzZUludCgoKF9hID0gZXZlbnQuZGF0YVRyYW5zZmVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0RGF0YSgndGV4dC9wbGFpbicpKSB8fCAnJyk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc05hTihkcmFnZ2VkVGFza0lkKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0VGFza0lkXzEgPSBwYXJzZUludCh0YXNrSXRlbS5kYXRhc2V0LnRhc2tJZCB8fCAnJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkcmFnZ2VkVGFzayA9IHRvZG9MaXN0LnRhc2tzLmZpbmQoZnVuY3Rpb24gKHRhc2spIHsgcmV0dXJuIHRhc2suaWQgPT09IGRyYWdnZWRUYXNrSWQ7IH0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0VGFzayA9IHRvZG9MaXN0LnRhc2tzLmZpbmQoZnVuY3Rpb24gKHRhc2spIHsgcmV0dXJuIHRhc2suaWQgPT09IHRhcmdldFRhc2tJZF8xOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRyYWdnZWRUYXNrICYmIHRhcmdldFRhc2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkcmFnZ2VkSW5kZXggPSB0b2RvTGlzdC50YXNrcy5pbmRleE9mKGRyYWdnZWRUYXNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRJbmRleCA9IHRvZG9MaXN0LnRhc2tzLmluZGV4T2YodGFyZ2V0VGFzayk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW9yZGVyIHRhc2tzXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2RvTGlzdC50YXNrcy5zcGxpY2UoZHJhZ2dlZEluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9MaXN0LnRhc2tzLnNwbGljZSh0YXJnZXRJbmRleCwgMCwgZHJhZ2dlZFRhc2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgKDAsIGxvY2FsX3N0b3JhZ2VfdXRpbHNfMS5zYXZlRGF0YVRvTG9jYWxTdG9yYWdlKSgndGFza3MnLCB0b2RvTGlzdC50YXNrcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJUYXNrcyh0b2RvTGlzdC5maWx0ZXJUYXNrcygnYWxsJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0YXNrSXRlbS5hcHBlbmRDaGlsZChjaGVja2JveCk7XG4gICAgICAgICAgICB0YXNrSXRlbS5hcHBlbmRDaGlsZCh0YXNrTmFtZSk7XG4gICAgICAgICAgICB0YXNrSXRlbS5hcHBlbmRDaGlsZChlZGl0QnV0dG9uKTtcbiAgICAgICAgICAgIHRhc2tJdGVtLmFwcGVuZENoaWxkKGRlbGV0ZUJ1dHRvbik7XG4gICAgICAgICAgICB0YXNrTGlzdC5hcHBlbmRDaGlsZCh0YXNrSXRlbSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKlxuICogUmV0cmlldmUgc2F2ZWQgdGFza3MgZnJvbSBsb2NhbCBzdG9yYWdlLlxuICpcbiAqIEB0eXBlIHtUYXNrW10gfCBudWxsfVxuICovXG52YXIgc2F2ZWRUYXNrcyA9ICgwLCBsb2NhbF9zdG9yYWdlX3V0aWxzXzIuZ2V0RGF0YUZyb21Mb2NhbFN0b3JhZ2UpKCd0YXNrcycpO1xuLyoqXG4gKiBJZiB0aGVyZSBhcmUgc2F2ZWQgdGFza3MsIGFzc2lnbiB0aGVtIHRvIHRoZSB0b2RvTGlzdFxuICovXG5pZiAoc2F2ZWRUYXNrcykge1xuICAgIHRvZG9MaXN0LnRhc2tzID0gc2F2ZWRUYXNrcztcbn1cbi8qKlxuICogUmVuZGVyIHRoZSB0YXNrcyBpbml0aWFsbHkuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBjYWxsIHRyaWdnZXJzIHRoZSBpbml0aWFsIHJlbmRlcmluZyBvZiB0YXNrcy5cbiAqXG4gKiBAcGFyYW0ge1Rhc2tbXX0gdGFza3MgLSBBbiBhcnJheSBvZiBUYXNrIG9iamVjdHMgdG8gYmUgcmVuZGVyZWQuXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xucmVuZGVyVGFza3ModG9kb0xpc3QuZmlsdGVyVGFza3MoJ2FsbCcpKTtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImdldERhdGFGcm9tTG9jYWxTdG9yYWdlIiwic2F2ZURhdGFUb0xvY2FsU3RvcmFnZSIsImtleSIsImRhdGEiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldEl0ZW0iLCJwYXJzZSIsIl9fYXNzaWduIiwidGhpcyIsImFzc2lnbiIsInQiLCJzIiwiaSIsIm4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJwIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiYXBwbHkiLCJUb0RvTGlzdEltcGwiLCJsb2NhbF9zdG9yYWdlX3V0aWxzXzEiLCJ0YXNrcyIsImFkZFRhc2siLCJ0YXNrIiwidW5zaGlmdCIsImRlbGV0ZVRhc2siLCJpZCIsImZpbHRlciIsImVkaXRUYXNrIiwiX2EiLCJuZXdOYW1lIiwibWFwIiwibmFtZSIsInRvZ2dsZVRhc2tDb21wbGV0aW9uIiwiY29tcGxldGVkIiwiZmlsdGVyVGFza3MiLCJjbGVhckNvbXBsZXRlZFRhc2tzIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsInRvX2RvX2xpc3RfMSIsImxvY2FsX3N0b3JhZ2VfdXRpbHNfMiIsInRvZG9MaXN0IiwiYWxsQnV0dG9uIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImFjdGl2ZUJ1dHRvbiIsImNvbXBsZXRlZEJ1dHRvbiIsImNsZWFyQ29tcGxldGVkQnV0dG9uIiwiYWRkVGFza01vZGFsIiwiYWRkVGFza0J1dHRvbiIsImNsb3NlQWRkVGFza01vZGFsQnV0dG9uIiwiYWRkTmV3VGFza0J1dHRvbiIsImNsb3NlQWRkVGFza01vZGFsIiwiY2xhc3NMaXN0IiwiYWRkIiwiaGFuZGxlQ29tcGxldGlvblN0YXR1cyIsImV2ZW50IiwiY2xpY2tlZEJ1dHRvbiIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYnRuIiwicmVtb3ZlIiwiZGF0YXNldCIsInJlbmRlclRhc2tzIiwidG9nZ2xlQnV0dG9uIiwidGFyZ2V0IiwidGFza0xpc3QiLCJpbm5lckhUTUwiLCJ0YXNrSXRlbSIsImNyZWF0ZUVsZW1lbnQiLCJkcmFnZ2FibGUiLCJ0YXNrSWQiLCJ0b1N0cmluZyIsImNoZWNrYm94IiwidHlwZSIsImNoZWNrZWQiLCJhZGRFdmVudExpc3RlbmVyIiwidGFza05hbWUiLCJ0ZXh0Q29udGVudCIsImVkaXRCdXR0b24iLCJtb2RhbCIsIm5ld05hbWVFbGVtZW50IiwidXBkYXRlVGFza0J0biIsImhhbmRsZVVwZGF0ZVRhc2tDbGljayIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkZWxldGVCdXR0b24iLCJkZWxldGVDb25maXJtYXRpb25Nb2RhbCIsImNvbmZpcm1EZWxldGVCdXR0b24iLCJjYW5jZWxEZWxldGVCdXR0b24iLCJoYW5kbGVDb25maXJtRGVsZXRlIiwiaGFuZGxlQ2FuY2VsRGVsZXRlIiwiZGF0YVRyYW5zZmVyIiwic2V0RGF0YSIsInByZXZlbnREZWZhdWx0IiwiZHJhZ2dlZFRhc2tJZCIsInBhcnNlSW50IiwiZ2V0RGF0YSIsImlzTmFOIiwidGFyZ2V0VGFza0lkXzEiLCJkcmFnZ2VkVGFzayIsImZpbmQiLCJ0YXJnZXRUYXNrIiwiZHJhZ2dlZEluZGV4IiwiaW5kZXhPZiIsInRhcmdldEluZGV4Iiwic3BsaWNlIiwiYXBwZW5kQ2hpbGQiLCJ0YXNrSW5wdXQiLCJ0cmltIiwibmV3VGFzayIsInNhdmVkVGFza3MiXSwic291cmNlUm9vdCI6IiJ9